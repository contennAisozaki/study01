// アコーディオン関連
$(function(){
        $('.sub_menu').hide();
        $('.main_menu').click(function(){
                $('span').removeClass('rotate');
                $('ul.sub_menu').slideUp();
                if($('+ul.sub_menu',this).css('display') == 'none'){
                        $('span',this).addClass('rotate');
                        $('+ul.sub_menu',this).slideDown();
                        $('+ul.sub_menu',this).addClass('fadeIn padd-top-lg');
                }
        });
});
$(function(){
        $('.sub_menu-news').hide();
        $('.main_menu').click(function(){
                $('span').removeClass('rotate');
                $('ul.sub_menu-news').slideUp();
                if($('+ul.sub_menu-news',this).css('display') == 'none'){
                        $('span',this).addClass('rotate');
                        $('+ul.sub_menu-news',this).slideDown();
                        $('+ul.sub_menu-news',this).addClass('fadeIn');
                }
        });
});
//MenuAreaSelect
$(document).ready(function() {
	//初期表示
	$(".menuWrap").hide();//全ての.tab_contentを非表示
	if($.cookie("menuTabArea") == "#menuOsaka"){
		$("#menuTabOsaka").addClass("areaSelect").show();
		$("#menuOsaka").show();//最初の.tab_contentを表示
	} else {
		$("#menuTabTokyo").addClass("areaSelect").show();
		$("#menuTokyo").show();//最初の.tab_contentを表示
	};
	//タブクリック時
	$("#menuTab li").click(function() {
		$("#menuTab li").removeClass("areaSelect");//.activeを外す
		$(this).addClass("areaSelect");//クリックタブに.activeを追加
		$(".menuWrap").hide();//全ての.tab_contentを非表示
		var activeTab = $(this).find("a").attr("href");//アクティブタブコンテンツ
		$(activeTab).fadeIn("slow");//アクティブタブコンテンツをフェードイン
		$.cookie("menuTabArea" , activeTab);
		return false;
	});
	$("#newsOsakaMenu").click(function() {
		$("#menuTab li").removeClass("areaSelect");//.activeを外す
		$("#menuTabOsaka").addClass("areaSelect");//クリックタブに.activeを追加
		$(".menuWrap").hide();//全ての.tab_contentを非表示
		var activeTab = "#menuOsaka";//アクティブタブコンテンツ
		$(activeTab).fadeIn("slow");//アクティブタブコンテンツをフェードイン
		$.cookie("menuTabArea" , activeTab);
		return false;
	});
	$("#newsTokyoMenu").click(function() {
		$("#menuTab li").removeClass("areaSelect");//.activeを外す
		$("#menuTabTokyo").addClass("areaSelect");//クリックタブに.activeを追加
		$(".menuWrap").hide();//全ての.tab_contentを非表示
		var activeTab = "#menuTokyo";//アクティブタブコンテンツ
		$(activeTab).fadeIn("slow");//アクティブタブコンテンツをフェードイン
		$.cookie("menuTabArea" , activeTab);
		return false;
	});
});
// PAGETOP
$(function () {

    var $pageLink = $('#pageTop'),
        $pageButton = $('#ptopBtn'),
        $backButton = $('#ptopBtn2');
        $backButton2 = $('#ptopBtn3');

    $pageLink.on('click', function (event) {

        var self = $(this), 
            OFFSET = 500, 
            pageTop = self.offset().top, 
            target = $('#body').offset().top - OFFSET; 

        function playAnimation() {
            fadeAnime()
                .then(upDown)
                .then(moveTop)
                .then(removeAction);
        }

        function fadeAnime() {
            var SPEED = 500;
            var d = new $.Deferred;

            $pageButton.animate({opacity: 0}, SPEED, function () {
                $backButton.animate({opacity: 1}, SPEED, function () {
                    d.resolve();
                });
            });
            return d.promise();
        }

        function upDown(){
            var TIMER = 1000,
                TIMER2 = 50;
            var d = new $.Deferred;
            self.animate({
                top:  + 140
            }, TIMER, function () {
                self.animate({
                    top:  + 140
                }, TIMER2, function () {
                    d.resolve();
                });
            });
            return d.promise();
		}            

        function moveTop(){
            var TIMER = 2500;
            var d = new $.Deferred;
            $backButton2.animate({opacity: 1},100, "easeInCubic");
            $('html, body').animate({scrollTop: 0}, TIMER, "easeInCubic");
            self.animate({top: -pageTop-200}, TIMER, "easeInCubic", function () {
                d.resolve();
            });
            return d.promise();
        }

        function removeAction() {
            var SPEED = 500;
            var d = new $.Deferred;
            self.hide(function () {
                self.fadeIn();
                self.css({top: pageTop-pageTop});
                $pageButton.animate({opacity: 1}, SPEED);
                $backButton.animate({opacity: 0}, SPEED);
                $backButton2.animate({opacity: 0}, SPEED);
                d.resolve();
            });
            return d.promise();
        }
                 
        playAnimation();

        event.preventDefault();
       return false;
    });
});

//ナビゲーション
(function($) {
	$(function() {
		var $header = $('#top-head');

		// Nav Fixed
		$(window).scroll(function() {
			if ($(window).scrollTop() > 150) {
				$header.addClass('fixed');
			} else {
				$header.removeClass('fixed');
			}
		});

		// Nav Toggle Button
		$('#nav-toggle').click(function(){
			$header.toggleClass('open');
		});

	});
})(jQuery);

// 高さ揃え
$(function(){
	$('.js-matchHeigtht').matchHeight();
});

//スライダー
$(function() {
	$('.slider').slick({
		dots:true,
		arrows:true,
		lazyLoad: 'ondemand',
		slidesToShow: 1,
		slidesToScroll: 1
	});
});

// アンカーリンク
$(function(){
   // #で始まるアンカーをクリックした場合に処理
   $('a[href^=#]:not(a[href=#menuOsaka], a[href=#menuTokyo])').click(function() {
      // スクロールの速度
      var speed = 400; // ミリ秒
　　　 // 移動先を取得
      var href= $(this).attr("href");
      var target = $(href == "#" || href == "" ? 'html' : href);
      // 移動先を数値で取得
      var position = target.offset().top;
      // スムーススクロール
      $('body,html').animate({scrollTop:position}, speed, 'swing');
      return false;
   });
});

// ミュージックプレイヤー
jQuery(function($){
	
    $("#m_01").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_01.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_1', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_02").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_02.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_2', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_03").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_03.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_3', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_04").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_04.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_4', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_05").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_05.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_5', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_06").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_06.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_6', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_07").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_07.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_7', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_08").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_08.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_8', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_09").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_09.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_9', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_10").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_10.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_10', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_11").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_11.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_11', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});
    $("#m_12").jPlayer({
		ready: function () {
			$(this).jPlayer("setMedia", {
				mp3: "media/M_12.mp3"
			});
		},
		cssSelectorAncestor: '#m_c_12', 
		cssSelector: {play: '.play',pause: '.pause'}, 
		play: function(){
			$(this).jPlayer("pauseOthers");
		}
	});

});
